window.Yikes_Mailchimp_Ajax=window.Yikes_Mailchimp_Ajax||{},function(a,b,c,d,e){"use strict";d.l10n=a.yikes_mailchimp_ajax||{},c(b).ready(function(){var a=c("body");a.on("submit",".yikes-easy-mc-form",function(){var a=c(this);a.find("input, label, button").not(":hidden").fadeTo("fast",.5),a.append('<img src="'+d.l10n.preloader_url+'" class="yikes-mailchimp-preloader" />');var b=a.find(".yikes-easy-mc-submit-button").text();a.find(".yikes-easy-mc-submit-button").text("").html('<img src="'+d.l10n.loading_dots+'" class="loading-dots" />');var e=a.attr("data-attr-form-id"),f=[];if(a.find(".yikes-interest-group-required").length>0&&a.find(".yikes-interest-group-required").each(function(){var b=jQuery(this).attr("name"),c=b.replace("[]","");0==a.find('input[name="'+c+'[]"]:checked').length&&(f[c]=a.find("span."+c+"-label").text())}),f.length>0){if(a.find(".yikes-mailchimp-required-interest-group-error").length>0)a.find(".yikes-mailchimp-required-interest-group-error").fadeOut("fast",function(){a.find(".yikes-mailchimp-required-interest-group-error").remove();for(var b in f)a.find("span."+b+"-label").after('<p class="yikes-mailchimp-required-interest-group-error">'+d.l10n.interest_group_checkbox_error+"</p>")});else for(var g in f)a.find("span."+g+"-label").after('<p class="yikes-mailchimp-required-interest-group-error">'+d.l10n.interest_group_checkbox_error+"</p>");return a.find(".yikes-easy-mc-submit-button").removeAttr("disabled","disabled"),a.find("input, label, button").not(":hidden").fadeTo("fast",1),a.find(".yikes-mailchimp-preloader").remove(),a.find(".yikes-easy-mc-submit-button").html("").text(b),!1}a.find(".yikes-easy-mc-submit-button").attr("disabled","disabled"),c(".yikes-easy-mc-error-message").remove(),c(".yikes-easy-mc-success-message").remove();var h={action:"process_form_submission",form_data:a.serialize(),form_id:e,page_data:d.l10n.page_data,ajax_security_nonce:d.l10n.ajax_security_nonce};return c.ajax({url:d.l10n.ajax_url,type:"POST",data:h,success:function(f,g,h){if(a.find("input, label, button").not(":hidden").fadeTo("fast",1),a.find(".yikes-mailchimp-preloader").remove(),a.find(".yikes-easy-mc-submit-button").html("").text(b),f.success){f=f.data,1==f.hide&&(c(".yikes-easy-mc-form-description-"+e).length>0&&c(".yikes-easy-mc-form-description-"+e).hide(),a.hide()),c(".yikes-easy-mc-form-description-"+e).length>0?c(".yikes-easy-mc-form-description-"+e).before('<p class="yikes-easy-mc-success-message yikes-easy-mc-success-message-'+e+' yikes-easy-mc-hidden">'+f.response+"</p>"):a.before('<p class="yikes-easy-mc-success-message yikes-easy-mc-success-message-'+e+' yikes-easy-mc-hidden">'+f.response+"</p>"),c(".yikes-easy-mc-success-message-"+e).fadeIn(),c(".yikes-mailchimp-required-interest-group-error").remove(),1==f.redirection&&a.before(f.redirect),a.find("input").not('.yikes-easy-mc-submit-button, input[type="radio"], input[type="select"], input[type="checkbox"], #yikes-mailchimp-associated-list-id, #yikes-mailchimp-submitted-form').val("");var i={action:"increase_submission_count",form_id:e};c.ajax({url:d.l10n.ajax_url,type:"POST",data:i,success:function(a,b,c){},error:function(a,b,c){console.error(c)}})}else{if(f=f.data,c(".yikes-easy-mc-form-description-"+e).length>0)c(".yikes-easy-mc-form-description-"+e).before('<p class="yikes-easy-mc-error-message yikes-easy-mc-error-message-'+e+'" yikes-easy-mc-hidden"> '+f.response+"</p>");else{var j="undefined"!=typeof f&&"undefined"!=typeof f.response?f.response:"Error collecting the API response.";a.before('<p class="yikes-easy-mc-error-message yikes-easy-mc-error-message-'+e+' yikes-easy-mc-hidden">'+j+"</p>")}c(".yikes-easy-mc-error-message").fadeIn()}},error:function(a,b,c){console.error(c),console.log(a),console.log(b)},complete:function(b,c){a.find(".yikes-easy-mc-submit-button").removeAttr("disabled","disabled")}}),!1}),a.on("click",".send-update-email",function(){var a={action:"easy_forms_send_email",user_email:jQuery(this).attr("data-user-email"),list_id:jQuery(this).attr("data-list-id"),form_id:jQuery(this).attr("data-form-id")};return jQuery(this).parent("p").fadeTo("fast",.75).append('<img src="'+d.l10n.preloader_url+'" class="update-email-preloader" />'),jQuery.post(d.l10n.ajax_url,a,function(a){a.success?jQuery(".yikes-easy-mc-error-message").removeClass("yikes-easy-mc-error-message").addClass("yikes-easy-mc-success-message").html(a.data.response_text):jQuery(".yikes-easy-mc-error-message").fadeTo("fast",1).html(a.data.response_text)}),!1})})}(window,document,jQuery,Yikes_Mailchimp_Ajax);